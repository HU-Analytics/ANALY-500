library(dplyr)
path <- "data"
files = list.files(path = path, pattern="*.csv")
rawdata = lapply(files, read.csv)
rawdata = lapply(paste0("data\",files), read.csv)
paste0("data\",files)
?paste0
files
rawdata = lapply(paste0('data\',files), read.csv)
paste0('data\',files)
paste(files, 'data')
rawdata = lapply(paste("data",files, sep="\"), read.csv)
paste("data",files, sep="\")
paste("data",files, sep="\")
paste("data",files)
paste("data",files, sep = "")
paste("data",files, sep = "\")
paste("data",files, sep = "/")
paste("data",files, sep = "/")
paste("data",files, sep = "\")
paste("data",files, sep = "/")
rawdata = lapply(paste("data",files, sep="/"), read.csv)
rawdata = lapply(paste("data",files, sep="/"), read.csv(stringsAsFactors = F))
files[1]
rawdata <- NA
rawdata <- NA
rawdata <- data.frame()
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
for (i in 1:length(files)) assign(files[i], read.csv(files[i]))
for (i in 1:length(files)) assign(files[i], read.csv(files[i]))
rawdata <- for (i in 1:length(paste("data", files, sep = "/")) assign(files[i], read.csv(files[i], stringsAsFactors = F))
rawdata <- for (i in 1:length(paste("data", files, sep = "/"))) assign(files[i], read.csv(files[i], stringsAsFactors = F))
rawdata <- for (i in 1:length(paste("data", files, sep = "\"))) assign(files[i], read.csv(files[i], stringsAsFactors = F))
for (i in 1:length(paste("data", files, sep = "/"))) assign(files[i], read.csv(files[i], stringsAsFactors = F))
for (i in 1:length(paste("data", files, sep = "/"))){
assign(files[i], read.csv(files[i], stringsAsFactors = F))
}
paste("data", files[i], sep = "/"))
for (i in 1:length(files){
assign(files[i], read.csv(paste("data", files[i], sep = "/")), stringsAsFactors = F))
}
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/")), stringsAsFactors = F))
}
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/")), stringsAsFactors = F)))
}
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/"), stringsAsFactors = F))
}
View(rawdata_Yujing.csv)
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/"), stringsAsFactors = F))
}
rawdata <- rbind(rawdata_Chang.csv, rawdata_Yujing.csv, rawdata_zhengdao.csv)
View(rawdata_Chang.csv)
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/"), stringsAsFactors = F))
}
rawdata <- rbind(rawdata_Chang.csv, rawdata_Yujing.csv, rawdata_zhengdao.csv)
rawdata <- rbind(rawdata_Chang.csv, rawdata_Yujing.csv, rawdata_zhengdao.csv)
colnames(rawdata_Chang.csv)
colnames(rawdata_Yujing.csv)
colnames(rawdata_zhengdao.csv)
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/"), stringsAsFactors = F))
}
rawdata <- rbind(rawdata_Chang.csv, rawdata_Yujing.csv, rawdata_zhengdao.csv)
View(rawdata)
---
title: "Impact of Age On Academic Achievement"
author: "Yujing Fang, Chang Lian, Zhengdao Song"
date: "July 1, 2016"
output: html_document
---
Load libraries
```{r}
library(dplyr)
library(tm)
library(plyr)
library(DataCombine)
```
Load raw data
```{r}
# Read all raw data
path <- "data"
files = list.files(path = path, pattern="*.csv")
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/"), stringsAsFactors = F))
}
# Merge all raw data
rawdata <- rbind(rawdata_Chang.csv, rawdata_Yujing.csv, rawdata_zhengdao.csv)
```
Clean Data
* Remove records with NA
```{r}
# Replace N/A with NA before removing
rawdata[rawdata == "N/A"] <- NA
# Replace blank with NA before removing
rawdata[rawdata == ""] <- NA
# Remove all records with NA in any field
rawdata <- na.omit(rawdata)
```
* Remove capitalization, leading/trailing space in all text columns
```{r}
for (i in 1:ncol(rawdata)){
rawdata[,i] <- tolower(rawdata[,i])
rawdata[,i] <- trimws(rawdata[,i])
}
```
* Unify the way of coding 'gender'
```{r}
# Unify gender coding
rawdata$gender <- revalue(rawdata$gender, c(w = "female", m = "male"))
```
* Unify the naming of universities
```{r}
# Identify distinct names
temp1 <- data.frame(rawdata$current_university)
temp2 <- data.frame(rawdata$phd_university)
temp3 <- data.frame(rawdata$bs_university)
colnames(temp1) <-"university"
colnames(temp2) <- "university"
colnames(temp3)<- "university"
university <- rbind(temp1, temp2, temp3)
university <- distinct(university)
university[order(university),]
#write.csv(university, "university2.csv", row.names = F)
# Unify naming
# Create replacements data frame
Replaces <- data.frame(from = c("univesity","univeristy","brandels","cornell","mit","oberlin university","university,","universsity","purdue","uc berkeley","uc davis","uc irvine","uc san diego","uc san franciso","uc santa cruz","univeristy of california, san franciso","auto_noma","universitÃ© de montrÃ©al","universite de montreal","angelas",",","university of illinois-urban champaign","university of illinois, champaign-urbana","university of tennnessee-memphis","university of washington-seattle","ut austin","washington university","yale","harvard college"),
to = c("university","university","brandeis","cornell university","massachusetts institute of technology","oberlin college","university","university","purdue university","university of california-berkeley","university of california-davis","university of california-irvine","university of california-san diego","university of california-san francisco","university of california-santa cruz","university of california-san francisco","autonoma","university of montreal","university of montreal","angeles","-","university of illinois-urban champaign","university of illinois-champaign","university of tennessee","university of washington","university of texas","washington university","yale university","harvard university"))
# Replace patterns and return full data frame
rawdata <- FindReplace(data = rawdata, Var = "current_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "phd_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "bs_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
temp1 <- data.frame(rawdata$current_university)
temp2 <- data.frame(rawdata$phd_university)
temp3 <- data.frame(rawdata$bs_university)
colnames(temp1) <-"university"
colnames(temp2) <- "university"
colnames(temp3)<- "university"
university <- rbind(temp1, temp2, temp3)
university <- distinct(university)
university[order(university),]
write.csv(university, "university2.csv", row.names = F)
Load raw data
```{r}
# Read all raw data
path <- "data"
files = list.files(path = path, pattern="*.csv")
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/"), stringsAsFactors = F))
}
# Merge all raw data
rawdata <- rbind(rawdata_Chang.csv, rawdata_Yujing.csv, rawdata_zhengdao.csv)
```
Clean Data
* Remove records with NA
```{r}
# Replace N/A with NA before removing
rawdata[rawdata == "N/A"] <- NA
# Replace blank with NA before removing
rawdata[rawdata == ""] <- NA
# Remove all records with NA in any field
rawdata <- na.omit(rawdata)
```
* Remove capitalization, leading/trailing space in all text columns
```{r}
for (i in 1:ncol(rawdata)){
rawdata[,i] <- tolower(rawdata[,i])
rawdata[,i] <- trimws(rawdata[,i])
}
```
* Unify the way of coding 'gender'
```{r}
# Unify gender coding
rawdata$gender <- revalue(rawdata$gender, c(w = "female", m = "male"))
Replaces <- data.frame(from = c("univesity","univeristy","brandels","cornell","mit","oberlin university","university,","universsity","purdue","uc berkeley","uc davis","uc irvine","uc san diego","uc san franciso","uc santa cruz","univeristy of california, san franciso","auto_noma","universitÃ© de montrÃ©al","universite de montreal","angelas","university of illinois-urban champaign","university of illinois, champaign-urbana","university of tennnessee-memphis","university of washington-seattle","ut austin","washington university","yale","harvard college"),
to = c("university","university","brandeis","cornell university","massachusetts institute of technology","oberlin college","university","university","purdue university","university of california-berkeley","university of california-davis","university of california-irvine","university of california-san diego","university of california-san francisco","university of california-santa cruz","university of california-san francisco","autonoma","university of montreal","university of montreal","angeles","university of illinois-urban champaign","university of illinois-champaign","university of tennessee","university of washington","university of texas","washington university","yale university","harvard university"))
rawdata <- FindReplace(data = rawdata, Var = "current_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "phd_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "bs_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
temp1 <- data.frame(rawdata$current_university)
temp2 <- data.frame(rawdata$phd_university)
temp3 <- data.frame(rawdata$bs_university)
colnames(temp1) <-"university"
colnames(temp2) <- "university"
colnames(temp3)<- "university"
university <- rbind(temp1, temp2, temp3)
university <- distinct(university)
university[order(university),]
write.csv(university, "university2.csv", row.names = F)
path <- "data"
files = list.files(path = path, pattern="*.csv")
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/"), stringsAsFactors = F))
}
# Merge all raw data
rawdata <- rbind(rawdata_Chang.csv, rawdata_Yujing.csv, rawdata_zhengdao.csv)
```
Clean Data
* Remove records with NA
```{r}
# Replace N/A with NA before removing
rawdata[rawdata == "N/A"] <- NA
# Replace blank with NA before removing
rawdata[rawdata == ""] <- NA
# Remove all records with NA in any field
rawdata <- na.omit(rawdata)
```
* Remove capitalization, leading/trailing space in all text columns
```{r}
for (i in 1:ncol(rawdata)){
rawdata[,i] <- tolower(rawdata[,i])
rawdata[,i] <- trimws(rawdata[,i])
}
```
* Unify the way of coding 'gender'
```{r}
# Unify gender coding
rawdata$gender <- revalue(rawdata$gender, c(w = "female", m = "male"))
```
* Unify the naming of universities
```{r}
# Identify distinct names
temp1 <- data.frame(rawdata$current_university)
temp2 <- data.frame(rawdata$phd_university)
temp3 <- data.frame(rawdata$bs_university)
colnames(temp1) <-"university"
colnames(temp2) <- "university"
colnames(temp3)<- "university"
university <- rbind(temp1, temp2, temp3)
university <- distinct(university)
university[order(university),]
write.csv(university, "university2.csv", row.names = F)
# Unify naming
Replaces <- data.frame(from = c("univesity","univeristy","brandels","cornell","mit","oberlin university","university,","universsity","purdue","uc berkeley","uc davis","uc irvine","uc san diego","uc san franciso","uc santa cruz","univeristy of california, san franciso","auto_noma","universitÃ© de montrÃ©al","universite de montreal","angelas","university of illinois-urban champaign","university of illinois, champaign-urbana","university of tennnessee-memphis","university of washington-seattle","ut austin","washington university","yale","harvard college", "university of illinois-champaign","university of wisconsin, madison","university university","university of california, berkeley","university of california, los angeles","university of california, san diego",'university of california, san francisco',"university of california, san franciso","university of california, santa cruz"),
to = c("university","university","brandeis","cornell university","massachusetts institute of technology","oberlin college","university","university","purdue university","university of california-berkeley","university of california-davis","university of california-irvine","university of california-san diego","university of california-san francisco","university of california-santa cruz","university of california-san francisco","autonoma","university of montreal","university of montreal","angeles","university of illinois-urban champaign","university of illinois-champaign","university of tennessee","university of washington","university of texas","washington university","yale university","harvard university","university of illinois-urban champaign","university of wisconsin-madison","university","university of california-berkeley","university of california-los angeles","university of california-san diego",'university of california-san francisco',"university of california-san francisco","university of california-santa cruz"))
rawdata <- FindReplace(data = rawdata, Var = "current_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "phd_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "bs_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
temp1 <- data.frame(rawdata$current_university)
temp2 <- data.frame(rawdata$phd_university)
temp3 <- data.frame(rawdata$bs_university)
colnames(temp1) <-"university"
colnames(temp2) <- "university"
colnames(temp3)<- "university"
university <- rbind(temp1, temp2, temp3)
university <- distinct(university)
university[order(university),]
write.csv(university, "university2.csv", row.names = F)
path <- "data"
files = list.files(path = path, pattern="*.csv")
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/"), stringsAsFactors = F))
}
# Merge all raw data
rawdata <- rbind(rawdata_Chang.csv, rawdata_Yujing.csv, rawdata_zhengdao.csv)
```
Clean Data
* Remove records with NA
```{r}
# Replace N/A with NA before removing
rawdata[rawdata == "N/A"] <- NA
# Replace blank with NA before removing
rawdata[rawdata == ""] <- NA
# Remove all records with NA in any field
rawdata <- na.omit(rawdata)
```
* Remove capitalization, leading/trailing space in all text columns
```{r}
for (i in 1:ncol(rawdata)){
rawdata[,i] <- tolower(rawdata[,i])
rawdata[,i] <- trimws(rawdata[,i])
}
```
* Unify the way of coding 'gender'
```{r}
# Unify gender coding
rawdata$gender <- revalue(rawdata$gender, c(w = "female", m = "male"))
```
* Unify the naming of universities
```{r}
# Identify distinct names
temp1 <- data.frame(rawdata$current_university)
temp2 <- data.frame(rawdata$phd_university)
temp3 <- data.frame(rawdata$bs_university)
colnames(temp1) <-"university"
colnames(temp2) <- "university"
colnames(temp3)<- "university"
university <- rbind(temp1, temp2, temp3)
university <- distinct(university)
university[order(university),]
#write.csv(university, "university2.csv", row.names = F)
# Unify naming
Replaces <- data.frame(from = c("univesity","univeristy","brandels","cornell","mit","oberlin university","university,","universsity","purdue","uc berkeley","uc davis","uc irvine","uc san diego","uc san franciso","uc santa cruz","univeristy of california, san franciso","auto_noma","universitÃ© de montrÃ©al","universite de montreal","angelas","university of illinois-urban champaign","university of illinois, champaign-urbana","university of tennnessee-memphis","university of washington-seattle","ut austin","washington university","yale","harvard college", "university of illinois-champaign","university of wisconsin, madison","university university","university of california, berkeley","university of california, los angeles","university of california, san diego",'university of california, san francisco',"university of california, san franciso","university of california, santa cruz","university of colorado, boulder","university of minnesota-twin cities","university of texas southwestern medical center","university of wisconsin-madison","washington university"),
to = c("university","university","brandeis","cornell university","massachusetts institute of technology","oberlin college","university","university","purdue university","university of california-berkeley","university of california-davis","university of california-irvine","university of california-san diego","university of california-san francisco","university of california-santa cruz","university of california-san francisco","autonoma","university of montreal","university of montreal","angeles","university of illinois-urban champaign","university of illinois-champaign","university of tennessee","university of washington","university of texas","washington university","yale university","harvard university","university of illinois-urban champaign","university of wisconsin-madison","university","university of california-berkeley","university of california-los angeles","university of california-san diego",'university of california-san francisco',"university of california-san francisco","university of california-santa cruz","university of colorado","university of minnesota","university of texas","university of wisconsin","university of washington"))
rawdata <- FindReplace(data = rawdata, Var = "current_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "phd_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "bs_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
path <- "data"
files = list.files(path = path, pattern="*.csv")
for (i in 1:length(files)){
assign(files[i], read.csv(paste("data", files[i], sep = "/"), stringsAsFactors = F))
}
# Merge all raw data
rawdata <- rbind(rawdata_Chang.csv, rawdata_Yujing.csv, rawdata_zhengdao.csv)
```
Clean Data
* Remove records with NA
```{r}
# Replace N/A with NA before removing
rawdata[rawdata == "N/A"] <- NA
# Replace blank with NA before removing
rawdata[rawdata == ""] <- NA
# Remove all records with NA in any field
rawdata <- na.omit(rawdata)
```
* Remove capitalization, leading/trailing space in all text columns
```{r}
for (i in 1:ncol(rawdata)){
rawdata[,i] <- tolower(rawdata[,i])
rawdata[,i] <- trimws(rawdata[,i])
}
```
* Unify the way of coding 'gender'
```{r}
# Unify gender coding
rawdata$gender <- revalue(rawdata$gender, c(w = "female", m = "male"))
```
* Unify the naming of universities
```{r}
# Identify distinct names
temp1 <- data.frame(rawdata$current_university)
temp2 <- data.frame(rawdata$phd_university)
temp3 <- data.frame(rawdata$bs_university)
colnames(temp1) <-"university"
colnames(temp2) <- "university"
colnames(temp3)<- "university"
university <- rbind(temp1, temp2, temp3)
university <- distinct(university)
university[order(university),]
#write.csv(university, "university2.csv", row.names = F)
# Unify naming
Replaces <- data.frame(from = c("univesity","univeristy","brandels","cornell","mit","oberlin university","university,","universsity","purdue","uc berkeley","uc davis","uc irvine","uc san diego","uc san franciso","uc santa cruz","univeristy of california, san franciso","auto_noma","universitÃ© de montrÃ©al","universite de montreal","angelas","university of illinois-urban champaign","university of illinois, champaign-urbana","university of tennnessee-memphis","university of washington-seattle","ut austin","washington university","yale","harvard college", "university of illinois-champaign","university of wisconsin, madison","university university","university of california, berkeley","university of california, los angeles","university of california, san diego",'university of california, san francisco',"university of california, san franciso","university of california, santa cruz","university of colorado, boulder","university of minnesota-twin cities","university of texas southwestern medical center","university of wisconsin-madison","washington university","university of wisconsin"),
to = c("university","university","brandeis","cornell university","massachusetts institute of technology","oberlin college","university","university","purdue university","university of california-berkeley","university of california-davis","university of california-irvine","university of california-san diego","university of california-san francisco","university of california-santa cruz","university of california-san francisco","autonoma","university of montreal","university of montreal","angeles","university of illinois-urban champaign","university of illinois-champaign","university of tennessee","university of washington","university of texas","washington university","yale university","harvard university","university of illinois-urban champaign","university of wisconsin-madison","university","university of california-berkeley","university of california-los angeles","university of california-san diego",'university of california-san francisco',"university of california-san francisco","university of california-santa cruz","university of colorado","university of minnesota","university of texas","university of wisconsin","university of washington","university of wisconsin-madison"))
rawdata <- FindReplace(data = rawdata, Var = "current_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "phd_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
rawdata <- FindReplace(data = rawdata, Var = "bs_university", replaceData = Replaces,
from = "from", to = "to", exact = FALSE)
```
colnames(rawdata)
rawdata <- select(rawdata, -department_program_name, -link_of_his_webpage)
rawdata <- mutate(rawdata, num_peered_reviewed_articles = num_nature + num_cell + num_science)
rawdata$num_articles <- as.numeric(rawdata$num_articles )
rawdata$num_nature <- as.numeric(rawdata$num_nature)
rawdata$num_cell <- as.numeric(rawdata$num_cell)
rawdata$num_science <- as.numeric(rawdata$num_science)
rawdata <- mutate(rawdata, num_peered_reviewed_articles = num_nature + num_cell + num_science)
